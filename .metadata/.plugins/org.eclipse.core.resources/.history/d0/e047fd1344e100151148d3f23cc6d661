package Task1Bank;

public abstract class BankProduct {

	private static final int MAX_PRODUCT_DURATION = 60;
	private static final int MIN_PROBUCT_DURATION = 1;
	
	private static final int THE_LENGTH_OF_IBAN = 22;

	private String iban = "BGITTALENTS";
	private double annualRate;
	private int monthsPeriod;
	private double moneyAvailability;


	public BankProduct(double annualRate, int monthsPeriod, double moneyAvailability) throws WrongAnnualRateValueException {
		this.generateIban();
		this.setAnnualRate(annualRate);
		this.setMonthsPeriod(monthsPeriod);
		this.setAvailability(moneyAvailability);
	}
	
	public String getIban() {
		return iban;
	}

	private String generateIban() {
		for (int index = 0; index < (THE_LENGTH_OF_IBAN - iban.length()); index++) {
			this.iban += (int) (Math.random() * 10);
		}
		return this.iban;
	}

	public double getAnnualRate() {
		return annualRate;
	}

	public void setAnnualRate(double annualRate) throws WrongAnnualRateValueException {
		if (annualRate > 0){
			this.annualRate = annualRate;
		} else {
			throw new WrongAnnualRateValueException("Annual rate must be positive value");
		}
		
	}

	public int getMonthsPeriod() {
		return monthsPeriod;
	}

	public void setMonthsPeriod(int monthsPeriod) {
		if (monthsPeriod >= MIN_PROBUCT_DURATION & monthsPeriod <= MAX_PRODUCT_DURATION)
			this.monthsPeriod = monthsPeriod;
	}

	public double getAvailability() {
		return moneyAvailability;
	}

	public void setAvailability(double moneyAvailability) {
		this.moneyAvailability = moneyAvailability;
	}

}
